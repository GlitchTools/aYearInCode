
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
		<script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.4/p5.js"></script>
		<!-- uncomment lines below to include extra p5 libraries -->
		<!--<script language="javascript" src="../addons/p5.dom.js"></script>-->
		<!--<script language="javascript" src="../addons/p5.sound.js"></script>-->
		<!-- this line removes any default padding and style. you might only need one of these values set. -->
		<style> body {padding: 0; margin: 0;} </style>
	</head>

	<body>
		<script language="javascript" type="text/javascript">

		var imgSrc;
		var imgBuffer;
		var imgDisplay;

		function preload(){
			imgSrc = loadImage("https://upload.wikimedia.org/wikipedia/commons/5/54/Landscape_of_Shadegan.jpg");
		}

		function setup() {

			devicePixelScaling(false);
			imgBuffer = createImage(imgSrc.width, imgSrc.height);
			imgDisplay = createImage(imgSrc.width, imgSrc.height);
			
			createCanvas(imgDisplay.width, imgDisplay.height);
			loadBuffer(imgSrc);
			displayBuffer();
			

		}

		function draw() {

		  	displayBuffer();
		}

		

		function loadBuffer(image){
			image.loadPixels();
			imgBuffer.loadPixels();
			for(var i = 0 ; i < imgSrc.pixels.length ; i++){
				imgBuffer.pixels[i] = image.pixels[i];	
			}
		  	
		 	// arrayCopy(image.pixels, 0, imgBuffer.pixels, 0, image.pixels.length);

		 	imgBuffer.updatePixels();
		}

		function displayBuffer(){
			imgDisplay.loadPixels();
			imgBuffer.loadPixels();
			for(var i = 0 ; i < imgSrc.pixels.length ; i++){
				imgDisplay.pixels[i] = imgBuffer.pixels[i];	
			}
		  	imgDisplay.updatePixels();
		  	image(imgDisplay, 0, 0);
		}

		


		</script>
	</body>
</html>
